<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STATAGGG</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
</head>

<body>

    <div class="app-container">
        <!-- Mobile Menu Button -->
        <button class="mobile-toggle" id="sidebarToggle">
            <i class="fa-solid fa-bars"></i>
        </button>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="logo-area">
                <a href="index.html"
                    style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 12px;">
                    <i class="fa-solid fa-gamepad logo-icon"></i>
                    <div class="logo-text-wrapper">
                        <span class="logo-text glitch" data-text="STATAGGG">STATA<span
                                class="highlight">GGG</span></span>
                    </div>
                </a>
            </div>

            <ul class="nav-links">
                <!-- Dashboard is now the main view -->
                <li class="nav-item active" data-tab="dashboard">
                    <i class="fa-solid fa-table-list"></i>
                    <span>Матч-центр</span>
                </li>
                <!-- Live is separate or part of dashboard? Let's keep separate for focused view if needed -->
                <li class="nav-item" data-tab="live">
                    <i class="fa-solid fa-tower-broadcast"></i>
                    <span class="nav-text">Трансляция LIVE</span>
                </li>
                <!-- Live Submenu -->
                <ul class="submenu" id="live-submenu">
                    <!-- Populated via JS from TWITCH_CHANNELS -->
                </ul>
                <li class="nav-item" data-tab="analytics">
                    <i class="fa-solid fa-chart-pie"></i>
                    <span>Аналитика</span>
                </li>
            </ul>

            <!-- League Selector removed as per user request (17-01-2026) -->
            <!-- <div class="league-selector">
                <label>Лига</label>
                <div class="custom-select" id="sidebar-league-select">
                    <span id="sidebar-league-current">Все</span>
                    <i class="fa-solid fa-chevron-down"></i>
                </div>
                <div class="filter-dropdown-menu" id="sidebar-league-dropdown"
                    style="width: 100%; top: auto; left: auto; position: relative; margin-top: 5px; display: none;">
                </div>
            </div> -->

            <!-- User Profile Area (Populated by JS) -->
            <div id="user-profile-container" style="display: none;">
                <div class="user-profile-card">
                    <div class="profile-main">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Warrior" id="user-avatar"
                            class="user-avatar" alt="Avatar">
                        <div class="user-info">
                            <span id="user-name" class="user-name">@Warrior</span>
                            <div class="user-balance-row">
                                <i class="fa-solid fa-wallet"></i>
                                <span>Баланс: <span id="user-balance">0</span> руб.</span>
                            </div>
                        </div>
                        <button id="logout-btn" class="logout-btn" title="Выйти">
                            <i class="fa-solid fa-right-from-bracket"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Version/Updates Indicator (Replaces Online Status) -->
            <div class="status-indicator" id="updates-trigger" style="cursor: pointer; margin-top: auto;">
                <span class="status-dot"></span>
                <span id="connection-status" style="font-size: 12px; font-weight: 600; color: var(--text-muted);">v2.13
                    (Обновления)</span>
            </div>
        </nav>

        <!-- Main Content Area -->
        <nav class="overlay" id="overlay"></nav>

        <main class="main-content">
            <!-- Top Header / Filter Bar -->
            <header class="top-bar">
                <!-- Search removed as per user request (17-01-2026) -->
                <!-- <div class="search-container">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="team-search" placeholder="Поиск команды...">
                </div> -->

                <div class="clock-display" id="app-clock">--:--</div>
            </header>

            <!-- Data View: Dashboard (Combined Table) -->
            <div id="view-dashboard" class="view-section active">
                <div class="section-header">
                    <h2>Матч-центр</h2>
                    <div class="table-actions">
                        <button class="icon-btn" title="Фильтр"><i class="fa-solid fa-filter"></i></button>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table class="modern-table">
                        <thead>
                            <!-- Row 1: Column Titles -->
                            <tr>
                                <th width="12%">Дата</th>
                                <th width="15%">Лига</th>
                                <th width="20%" style="text-align: right;">Команда 1</th>
                                <th width="20%" style="text-align: left;">Команда 2</th>
                                <th width="10%" style="text-align: center;">Счет</th>
                                <th width="10%" style="text-align: center;">П1</th>
                                <th width="10%">П2</th>
                                <th width="8%" class="map-col">Карта 1</th>
                                <th width="8%" class="map-col">Карта 2</th>
                                <th width="8%" class="map-col">Карта 3</th>
                                <th width="8%" class="map-col">Карта 4</th>
                                <th width="8%" class="map-col">Карта 5</th>
                            </tr>
                            <!-- Row 2: Filter Controls -->
                            <tr class="filter-row">
                                <td>
                                    <button class="filter-trigger full-width" data-col="time">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td>
                                    <button class="filter-trigger full-width" data-col="league">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td style="text-align: right;">
                                    <button class="filter-trigger" data-col="team1">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td>
                                    <button class="filter-trigger" data-col="team2">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td>
                                    <button class="filter-trigger full-width" data-col="score">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td>
                                    <button class="filter-trigger full-width" data-col="odds.p1">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td>
                                    <button class="filter-trigger full-width" data-col="odds.p2">Все <i
                                            class="fa-solid fa-chevron-down"></i></button>
                                </td>
                                <td>
                                    <!-- Map 1 Filter (disabled for now or enabled if needed) -->
                                </td>
                                <td><!-- Map 2 --></td>
                                <td><!-- Map 3 --></td>
                                <td><!-- Map 4 --></td>
                                <td><!-- Map 5 --></td>
                            </tr>
                        </thead>
                        <tbody id="dashboard-table-body">
                            <!-- JS will populate rows here (Live + History) -->
                        </tbody>
                    </table>

                </div>

                <div style="text-align: center; margin: 30px 0;">
                    <button id="load-more-btn" class="neon-btn"
                        style="display: none; padding: 10px 20px; font-size: 13px;">
                        <i class="fa-solid fa-rotate-right"></i> Показать еще
                    </button>
                </div>
            </div>

            <!-- Data View: Live Grid (Optional Focused View) -->
            <div id="view-live" class="view-section">
                <div class="section-header">
                    <h2>Трансляция LIVE</h2>
                </div>

                <div class="live-grid-container" id="live-container">
                    <!-- Helper text or initial state if needed, JS handles the player injection -->
                    <div id="twitch-player-wrapper" class="video-container">
                        <!-- iframe will be here -->
                    </div>
                </div>
            </div>

            <!-- Data View: Analytics (Stub) -->
            <div id="view-analytics" class="view-section">
                <div class="analytics-locked-wrapper">
                    <div class="blur-overlay">
                        <div class="lock-content">
                            <i class="fa-solid fa-crown"
                                style="font-size: 48px; color: #ffd700; margin-bottom: 20px;"></i>
                            <h2>PREMIUM АНАЛИТИКА</h2>
                            <p>Разблокируйте доступ к детальной статистике, прогнозам на основе AI и истории
                                коэффициентов.</p>
                            <button class="subscribe-btn"
                                onclick="document.getElementById('subscription-modal').style.display='flex'">
                                Оформить подписку
                            </button>
                        </div>
                    </div>

                    <!-- FAKE DASHBOARD BACKGROUND -->
                    <div class="fake-dashboard">
                        <div class="fake-card top-card">
                            <div class="fake-chart-line"></div>
                        </div>
                        <div class="fake-grid">
                            <div class="fake-card small-card"></div>
                            <div class="fake-card small-card"></div>
                            <div class="fake-card small-card"></div>
                        </div>
                        <div class="fake-card bottom-card">
                            <div class="fake-bars">
                                <div class="bar" style="height: 40%"></div>
                                <div class="bar" style="height: 70%"></div>
                                <div class="bar" style="height: 50%"></div>
                                <div class="bar" style="height: 90%"></div>
                                <div class="bar" style="height: 60%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Subscription Modal -->
    <div id="subscription-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal"><i class="fa-solid fa-xmark"></i></button>
            <div class="modal-body">
                <div class="modal-icon">
                    <i class="fa-solid fa-crown"></i>
                </div>
                <h2>Доступно по подписке</h2>
                <p>Раздел "Аналитика" доступен только для PREMIUM пользователей.<br>Оформите подписку, чтобы получить
                    доступ к детальной статистике и прогнозам.</p>
                <button class="subscribe-btn">Оформить подписку</button>
            </div>
        </div>
    </div>

    <!-- Updates Modal -->
    <div id="updates-modal" class="modal-overlay">
        <div class="modal-content updates-modal-content">
            <button class="close-modal" id="close-updates"><i class="fa-solid fa-xmark"></i></button>
            <div class="modal-body">
                <div class="modal-icon">
                    <i class="fa-solid fa-rocket"></i>
                </div>
                <h2>История обновлений</h2>
                <p>Хронология развития и улучшения STATAGGG</p>

                <div class="changelog-container" id="changelog-list">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- AUTH OVERLAY (Telegram Login) -->
    <div id="auth-overlay" class="auth-overlay" style="display: none;">
        <div class="auth-box">
            <div class="auth-icon">
                <i class="fa-brands fa-telegram"></i>
            </div>
            <h2>Требуется авторизация</h2>
            <p>Для доступа к полному функционалу сайта и фильтрам необходимо авторизоваться через нашего Telegram бота.
            </p>

            <a href="https://t.me/StatistikaBerserkCS_bot?start=site_access" target="_blank" class="auth-btn">
                <i class="fa-regular fa-paper-plane"></i> Войти через Telegram
            </a>

            <div class="auth-footer">
                <p>После нажатия нажмите <strong>START</strong> в боте</p>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/app.js?v=2.14"></script>
</body>

</html>